<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/bootstrap/bootstrap-4.1.3-dist/css/bootstrap.min.css' />
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <script type="text/javascript" src="/javascripts/jquery-1.12.0.js"></script>
    <script type="text/javascript" src="/javascripts/validacao.js"></script>
    <script type="text/javascript" src="/javascripts/ajax.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-9587782591125339",
      enable_page_level_ads: true
        });
    </script>
    </head>
    <body>
      <h1>Cadastro com dados backend</h1><br>
      <a href="/" class="btn btn-light botao-home">Home</a>
      <fieldset id="formCadastro">
        <legend>Cadastro de pessoas</legend>
        <form action="/cadastrar-pessoa" method="POST" onsubmit="return validacao()">
          <div>
            <label for="nome">Nome: </label>
            <input type="text" name="nome" id="nome" class="form-control"/>
          </div>
          <div>
            <label for="sobrenome">Sobrenome: </label>
            <input type="text" name="sobrenome" id="sobrenome" class="form-control"/>
          </div>
          <div>
            <label for="cpf">CPF: </label>
            <input type="text" name="cpf" id="cpf" class="form-control"/>
          </div>
          <div>
            <label for="telefone">Telefone: </label>
            <input type="text" name="telefone" id="telefone" class="form-control"/>
          </div>
          <div>
              <label for="endereco">Endereço: </label>
              <input type="text" name="endereco" id="endereco" class="form-control"/>
          </div>
          <div>
              <br>
              <input type="button" class="btn btn-primary" value="Carregar estados" onclick="carregarEstados()">
          </div>
          <div>
            <label for="estado">Estado: </label>
            <select id="estado" onchange="carregarCidade()" class="form-control" required="true" name="estado" ></select>
          </div>
          <div>
              <label for="cidade">Cidade: </label>
              <select id="cidade" name="cidade" class="form-control" ></select>
          </div>
          <hr>
          <div>
            <input type="submit" value="Cadastrar" class="btn btn-success"/>
          </div>
        </form>
      </fieldset>
      <fieldset id="formCadastro">
        <legend>Buscar</legend>
        <form action="/pesquisar" method="GET">
            <label for="nome">Nome: </label>
            <div class="botoes-pesquisa">
              <input type="text" name="nome" id="nome" class="form-control" />
              <input type="submit" value="Buscar" class="btn btn-primary"/>
          </div>
        </form>
      </fieldset>
      <fieldset>
        <legend>Pessoas cadastradas</legend>
        <div class="tabela-responsiva">
          <table border="1" id="registros" class="table table-striped table-bordered table-hover">
            <thead>
              <tr>
                <td>Nome</td>
                <td>Sobrenome</td>
                <td>CPF</td>
                <td>Telefone</td>
                <td>Endereço</td>
                <td></td>
                <td></td>
              </tr>
            </thead>
            <%  for(i=0; i<pessoas.length; i++) { %>
              <tr>
                <td><%= pessoas[i].nome %></td>
                <td><%= pessoas[i].sobrenome %></td>
                <td><%= pessoas[i].cpf %></td>
                <td><%= pessoas[i].telefone %></td>
                <td><%= pessoas[i].endereco %></td>
                <td><a href="/alterar?cpf=<%= pessoas[i].cpf %>" class="btn btn-warning">Alterar</a></td>
                <td><a href="#" onclick="excluirDados('<%= pessoas[i].cpf %>')" class="btn btn-danger">Excluir</a></td>
              </tr>
            <% } %>
          </table>
        </div>
      </fieldset>
  </body>
</html>
